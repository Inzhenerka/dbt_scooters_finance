# Финансовый расчет с dbt и DuckDB

Этот проект демонстрирует, как использовать dbt и DuckDB для локального анализа чувствительных финансовых данных.

Исходные данные хранятся в файле `finance_data/rates.xlsx`. Этот файл содержит затраты кикшеринговой компании "Каталкин" на обслуживание самокатов и поддержание работы.

Статистика поездок и выручки подгружается из parquet-файла, который хранится в S3.

## Установка зависимостей

```bash
pip install -r requirements.txt
```

## Запуск проекта

```bash
dbt build
```

## Анализ результатов

Итоговые таблицы выгружаются в файлы: ...

## Конвертация Excel-файла в CSV

Это необязательный шаг, потому что `dbt-duckdb` умеет читать Excel-файлы напрямую благодаря расширению `spatial`.
Но для наглядности и удобства работы с данными проект использует CSV.

DuckDB позволяет удобно конвертировать данные между поддерживаемыми форматами:

```bash
duckdb -c "INSTALL spatial; LOAD spatial; COPY (FROM st_read('finance_data/rates.xlsx')) TO 'finance_data/rates.csv';"
```
